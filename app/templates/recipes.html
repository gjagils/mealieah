{% extends "base.html" %}
{% block title %}Recepten - Mealieah{% endblock %}
{% block content %}
<h1>Recepten</h1>

{% if not recipes %}
<p class="muted">Geen recepten gevonden. Controleer de Mealie verbinding in <a href="/settings">Instellingen</a>.</p>
{% else %}
<div class="recipe-grid">
    {% for recipe in recipes %}
    <a href="/recipe/{{ recipe.slug }}" class="recipe-card">
        {% if recipe.id %}
        <img src="/proxy/recipe-image/{{ recipe.id }}" alt="{{ recipe.name }}" loading="lazy">
        {% else %}
        <div class="recipe-card-placeholder"></div>
        {% endif %}
        <div class="recipe-card-body">
            <h3>{{ recipe.name }}</h3>
            {% set stats = mapping_stats.get(recipe.slug) %}
            {% if stats %}
            <div class="mapping-status">
                {% if stats.mapped > 0 %}
                <span class="badge badge-mapped">{{ stats.mapped }} gemapped</span>
                {% endif %}
                {% if stats.skipped > 0 %}
                <span class="badge badge-skipped">{{ stats.skipped }} overgeslagen</span>
                {% endif %}
                {% set unmapped = stats.total - stats.mapped - stats.skipped %}
                {% if unmapped > 0 %}
                <span class="badge badge-unmapped">{{ unmapped }} open</span>
                {% endif %}
            </div>
            {% endif %}
        </div>
    </a>
    {% endfor %}
</div>
{% endif %}
{% endblock %}
